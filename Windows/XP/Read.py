import os
os.environ['OPENBLAS_NUM_THREADS'] = '1'

import time
import pickle
import random
import numpy as np
import pandas as pd

from copy import deepcopy

frameworkData = {}

# RESULTS += [idSI, nameI == T[idMinJ], elapsed]
if __name__ == '__main__':
    for ID_RUN in range(3,4):
        P = 40
        LQB = ["QB"]
        LC =  ["LIBDX", "SHAPE","BSIZE","DSIZE", "MUTANTX","PSS","GSA","FUNCTIONSET"]
        
        for nEmb in LC:
            frameworkData[nEmb] = {}
            for nQBI in LQB:
                RESULTS = []
                for pId in range(P):
                    inputFile = "R/R_"+nQBI+"_"+nEmb+"_"+str(pId)+"_"+str(ID_RUN)
                    with open(inputFile, "rb") as f:
                        RESULTS += pickle.load(f)
                        
                ACC = []
                T = []                
                for i in range(1,len(RESULTS), 3):
                    ACC += [RESULTS[i]]
                    T += [RESULTS[i+1]]
                print(nEmb, nQBI, sum(ACC)/len(ACC), sum(T)/len(T), sum(T))

"""
LIBDX QB 0.044030499767408936 12.431360102513798 614643.7375485897
LIBDX QB40k 0.04995396869871513 5.93242637050766 148209.80801439285
LIBDX QB20K 0.06322933046428866 3.0295564368062586 36606.13042593002
SHAPE QB 0.38854842950468216 0.3116636382765078 15409.585267305374
SHAPE QB40k 0.45038626265860787 0.14910284896363193 3725.0364756584167
SHAPE QB20K 0.47951667632210543 0.07139626041031294 862.6810145378113
BSIZE QB 0.19574054972392452 0.6332597901365304 31310.263803720474
BSIZE QB40k 0.2592162670616019 0.3156326845200598 7885.4513573646545
BSIZE QB20K 0.3114292808077464 0.15089339467258353 1823.244887828827
DSIZE QB 0.4453006492324495 0.6373473718767522 31512.366107702255
DSIZE QB40k 0.4714806068126326 0.3275050560286604 8182.058814764023
DSIZE QB20K 0.46213688653480095 0.15235141670724606 1840.8621680736542
MUTANTX QB 0.47171490403090427 2.9997021595043885 148314.2738723755
MUTANTX QB40k 0.5318016251050715 1.7246565665713172 43087.095002651215
MUTANTX QB20K 0.5501117272200613 0.7857420197644495 9494.120824813843
PSS QB 0.4748700523835528 2.2245838827915474 109990.10091686249
PSS QB40k 0.5412080214545891 1.1140309534190067 27831.835309267044
PSS QB20K 0.5716295621948192 0.5529228891352002 6680.967269420624
GSA QB 0.4442691584248529 1.0817361072947809 53484.278352975845
GSA QB40k 0.49573710122883563 0.5195019061345046 12978.716120958328
GSA QB20K 0.5095588843830174 0.24189203519315244 2922.781461238861
FUNCTIONSET QB 0.4261068300871711 2.007542487436631 99258.92320632935
FUNCTIONSET QB40k 0.49737821718768765 1.0112304585101115 25263.570544958115
FUNCTIONSET QB20K 0.550939336257552 0.48892064443005934 5907.628146648407
FUNCTIONSET QB20K 0.550939336257552 0.48892064443005934
"""